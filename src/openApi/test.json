{
    "openapi": "3.0.1",
    "info": {
        "title": "DiaperTracker.Api",
        "version": "1.0"
    },
    "paths": {
        "/api/identity/me": {
            "get": {
                "tags": [
                    "Account"
                ],
                "operationId": "Me",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserProfile"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/identity/{provider}/signin": {
            "post": {
                "tags": [
                    "Account"
                ],
                "operationId": "ExternalLogin",
                "parameters": [
                    {
                        "name": "provider",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ExternalLoginRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/api/identity/signout": {
            "post": {
                "tags": [
                    "Account"
                ],
                "operationId": "Signout",
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/api/invites/{id}": {
            "get": {
                "tags": [
                    "MemberInvite"
                ],
                "operationId": "GetInvite",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectMemberInviteDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invites/{id}/accept": {
            "post": {
                "tags": [
                    "MemberInvite"
                ],
                "operationId": "AcceptInvite",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectMemberInviteDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/invites/{id}/decline": {
            "post": {
                "tags": [
                    "MemberInvite"
                ],
                "operationId": "DeclineInvite",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectMemberInviteDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects": {
            "get": {
                "tags": [
                    "Project"
                ],
                "summary": "Gets the projects of the current user",
                "operationId": "GetMyProjects",
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ProjectDto"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Project"
                ],
                "summary": "Create a project with the given name and the logged in user as the administrator",
                "operationId": "CreateProject",
                "requestBody": {
                    "description": "The project to be created",
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateProjectDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects/{id}": {
            "get": {
                "tags": [
                    "Project"
                ],
                "summary": "Gets the project with the specified id",
                "operationId": "GetProject",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectDto"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Project"
                ],
                "summary": "Deletes the project with the given id",
                "operationId": "DeleteProject",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Id of the project",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            },
            "put": {
                "tags": [
                    "Project"
                ],
                "operationId": "UpdateProject",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateProjectDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects/{id}/task-types": {
            "get": {
                "tags": [
                    "Project"
                ],
                "operationId": "GetProjectTaskTypes",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/TaskTypeDto"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects/{id}/members": {
            "get": {
                "tags": [
                    "Project"
                ],
                "operationId": "GetMembers",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ProjectMemberDto"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects/{id}/invite-member": {
            "post": {
                "tags": [
                    "Project"
                ],
                "operationId": "InviteProjectMember",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateProjectMemberInviteDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProjectMemberInviteDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/statistics/tasks": {
            "get": {
                "tags": [
                    "Statistics"
                ],
                "summary": "Gets the statistics of the current user",
                "operationId": "GetTaskStatistics",
                "parameters": [
                    {
                        "name": "projectId",
                        "in": "query",
                        "description": "",
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Statistics"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/tasks": {
            "get": {
                "tags": [
                    "Task"
                ],
                "operationId": "GetTasks",
                "parameters": [
                    {
                        "name": "project",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "fromDate",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "toDate",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    },
                    {
                        "name": "offset",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    {
                        "name": "count",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskRecordDtoPagedList"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Task"
                ],
                "operationId": "CreateTask",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTaskDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskRecordDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/tasks/{id}": {
            "get": {
                "tags": [
                    "Task"
                ],
                "operationId": "GetTask",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskRecordDto"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Task"
                ],
                "operationId": "UpdateTask",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateTaskDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskRecordDto"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Task"
                ],
                "operationId": "DeleteTask",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        },
        "/api/task-types": {
            "post": {
                "tags": [
                    "TaskType"
                ],
                "operationId": "CreateTaskType",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTaskType"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskTypeDto"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/task-types/{id}/tasks": {
            "get": {
                "tags": [
                    "TaskType"
                ],
                "operationId": "GetTasksOfType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "userId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "offset",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    {
                        "name": "count",
                        "in": "query",
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskRecordDtoPagedList"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/task-types/{id}": {
            "get": {
                "tags": [
                    "TaskType"
                ],
                "operationId": "GetTaskType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskTypeDto"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "TaskType"
                ],
                "operationId": "UpdateTaskType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateTaskTypeDto"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/TaskTypeDto"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "TaskType"
                ],
                "operationId": "DeleteTaskType",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Success"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "CreateProjectDto": {
                "required": [
                    "name"
                ],
                "type": "object",
                "properties": {
                    "name": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "CreateProjectMemberInviteDto": {
                "required": [
                    "email"
                ],
                "type": "object",
                "properties": {
                    "email": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "CreateTaskDto": {
                "required": [
                    "projectId",
                    "typeId"
                ],
                "type": "object",
                "properties": {
                    "typeId": {
                        "minLength": 1,
                        "type": "string",
                        "description": "Task type ID",
                        "example": "10b9f582-436a-493c-ba89-78dfba79efda"
                    },
                    "projectId": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false,
                "description": "DTO to be used when creating a new task"
            },
            "CreateTaskType": {
                "required": [
                    "displayName",
                    "icon",
                    "projectId"
                ],
                "type": "object",
                "properties": {
                    "displayName": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "icon": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "projectId": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "ExternalLoginRequest": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "ProjectDto": {
                "required": [
                    "id",
                    "name",
                    "taskTypes"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "name": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "taskTypes": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/TaskTypeDto"
                        }
                    }
                },
                "additionalProperties": false
            },
            "ProjectMemberDto": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "projectId": {
                        "type": "string"
                    },
                    "userId": {
                        "type": "string"
                    },
                    "user": {
                        "$ref": "#/components/schemas/UserDto"
                    },
                    "isAdmin": {
                        "type": "boolean"
                    }
                },
                "additionalProperties": false
            },
            "ProjectMemberInviteDto": {
                "required": [
                    "createdBy",
                    "createdOn",
                    "email",
                    "id",
                    "isAccepted",
                    "project"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "project": {
                        "$ref": "#/components/schemas/ProjectDto"
                    },
                    "createdBy": {
                        "$ref": "#/components/schemas/UserDto"
                    },
                    "createdOn": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "email": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "isAccepted": {
                        "type": "boolean"
                    },
                    "token": {
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "Statistics": {
                "required": [
                    "data",
                    "keyLabel",
                    "legend",
                    "valueLabel"
                ],
                "type": "object",
                "properties": {
                    "valueLabel": {
                        "minLength": 1,
                        "type": "string",
                        "description": "Label for the value - usually this is the Y-axis label."
                    },
                    "keyLabel": {
                        "minLength": 1,
                        "type": "string",
                        "description": "Label for each key - usually this is the X-axis label."
                    },
                    "legend": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Each value corresponds to a value in the data list. In practise each value here corresponds to a line in the graph"
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": {}
                        },
                        "description": "List of maps containing a property for each DiaperTracker.Contracts.Statistics.Legend and the DiaperTracker.Contracts.Statistics.KeyLabel"
                    }
                },
                "additionalProperties": false
            },
            "TaskRecordDto": {
                "required": [
                    "createdBy",
                    "date",
                    "id",
                    "type"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "minLength": 1,
                        "type": "string",
                        "description": "The id of the task",
                        "example": "10b9f582-436a-493c-ba89-78dfba79efda"
                    },
                    "type": {
                        "$ref": "#/components/schemas/TaskTypeDto"
                    },
                    "createdBy": {
                        "$ref": "#/components/schemas/UserDto"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "additionalProperties": false,
                "description": "A representation of a persisted task including type details"
            },
            "TaskRecordDtoPagedList": {
                "required": [
                    "count",
                    "items",
                    "page",
                    "total"
                ],
                "type": "object",
                "properties": {
                    "items": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/TaskRecordDto"
                        }
                    },
                    "page": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "count": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "total": {
                        "type": "integer",
                        "format": "int64"
                    }
                },
                "additionalProperties": false
            },
            "TaskTypeDto": {
                "required": [
                    "displayName",
                    "icon",
                    "id",
                    "projectId"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "displayName": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "icon": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "projectId": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "UpdateProjectDto": {
                "required": [
                    "name"
                ],
                "type": "object",
                "properties": {
                    "name": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "UpdateTaskDto": {
                "required": [
                    "date"
                ],
                "type": "object",
                "properties": {
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "additionalProperties": false
            },
            "UpdateTaskTypeDto": {
                "required": [
                    "displayName",
                    "icon"
                ],
                "type": "object",
                "properties": {
                    "displayName": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "icon": {
                        "minLength": 1,
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "UserDto": {
                "required": [
                    "fullName",
                    "id"
                ],
                "type": "object",
                "properties": {
                    "id": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "fullName": {
                        "minLength": 1,
                        "type": "string"
                    },
                    "firstName": {
                        "type": "string"
                    }
                },
                "additionalProperties": false
            },
            "UserProfile": {
                "type": "object",
                "properties": {
                    "isLoggedIn": {
                        "type": "boolean"
                    },
                    "id": {
                        "type": "string"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "fullName": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "imageUrl": {
                        "type": "string"
                    },
                    "idp": {
                        "type": "string",
                        "description": "Identity Provider. e.g. facebook or google"
                    }
                },
                "additionalProperties": false
            }
        }
    }
}